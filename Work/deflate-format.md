# DEFLATE
## 压缩表示概述
一个压缩数据由一系列的块组成，与输入数据的连续( $successive$ )块相对应。块的大小是任意，除了不可压缩块的大小限制在65535个字节。

每个块是通过LZ77算法和Huffman编码混合压缩的。Huffman树对于前面和后续的块来讲是独立的；LZ77算法可能使用之前32K之内其他块的重复出现的字符串的引用。

每个块包含两个部分： 一对Huffman编码树描述压缩数据部分的陈述，还有就是压缩的数据部分。Huffman树自身也是通过huffman编码的.

压缩的数据包含两种类型的元素：1:字面字节(没有在前面32K输入字节中检测到重复的字符串的字节)，2:执行重复字符串的指针.指针表述成一对<length,backward distance>.deflate格式限制distance为32K 字节，length为258字节。但是不限制块的大小,除了对于不压缩数据块的限制，如上65535字节。

每个值(literal，distance，length)的类型，在压缩数据中都是通过huffman编码来表示的，literals，lengths使用一个树，distances使用另外一个树。这两个编码树在每个块压缩数据之前出现.

## 详细说明
这里data是小端。
huffman编码和数据元素的字节序不一样?
### 压缩数据格式
在deflate格式中，huffman编码不能超过指定的最大长度。这使算法更复杂了。

huffman编码使用的两个附加条件：

* 所有给出的编码序列，都有相应的值。

* 短的组合先处理。

#### 压缩数据详细：
每个压缩数据块以3个比特位开始：

* first bit	 BFINAL

* next 2 bits BTYPE

BFINAL当且仅当是最后一个块才被置位。

BTYPE说明数据是怎样被压缩的：

* 00 - 没压缩

* 01 - 用固定huffman编码

* 10 - 使用动态huffman编码

* 11 - 保留
